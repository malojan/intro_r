---
title: "exo 5"
---

```{r}
data <- haven::read_dta("https://www.migrationinstitute.org/files/data/demig-policy-database_version-1-3.dta")

x <- data |> 
  mutate(migration_restrict = case_when(
    change_restrict %in% c(9, 999) ~ NA_integer_,
    TRUE ~ change_restrict
  ))

x |> 
  filter(year > 1945) |> 
  group_by(year) |> 
  summarise(migration_restrict = mean(migration_restrict, na.rm = T)) |> 
  ggplot(aes(year, migration_restrict)) + geom_point() + 
  geom_smooth()

```
